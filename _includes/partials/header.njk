{% set T = i18n[lang] %}

{# --- rutas por idioma --- #}
{% set homeHref = '/' ~ lang ~ '/' %}
{% if lang == 'en' %}
  {% set menuHref = '/en/menu/' %}
  {% set contactHref = '/en/contact/' %}
  {% set mapHref = '/en/getting-here/' %}
{% elif lang == 'fr' %}
  {% set menuHref = '/fr/carte/' %}
  {% set contactHref = '/fr/contact/' %}
  {% set mapHref = '/fr/comment-arriver/' %}
{% else %}
  {% set menuHref = '/es/carta/' %}
  {% set contactHref = '/es/contacto/' %}
  {% set mapHref = '/es/como-llegar/' %}
{% endif %}

{# --- clases "active" --- #}
{% set isHome = (page.url == '/' or page.url == '/' ~ lang ~ '/') %}
{% set isMenu = ('/carta/' in page.url) or ('/menu/' in page.url) or ('/carte/' in page.url) %}
{% set isContact = ('/contact' in page.url) or ('/contacto' in page.url) %}
{% set isMap = ('/como-llegar' in page.url) or ('/getting-here' in page.url) or ('/comment-arriver' in page.url) %}

<header class="site-header">
  {% include "partials/lang-switch.njk" %}
  <div class="container header-row">
    <a href="/" class="brand" aria-label="Discobar JaluiJopi">
      <picture>
        <!-- Modo oscuro -->
        <source
          media="(prefers-color-scheme: dark)"
          srcset="/assets/brand/jalui_logo_kit/png/logo-dark@1x.png 1x,
                  /assets/brand/jalui_logo_kit/png/logo-dark@2x.png 2x">
        <!-- Modo claro -->
        <source
          media="(prefers-color-scheme: light)"
          srcset="/assets/brand/jalui_logo_kit/png/logo-light@1x.png 1x,
                  /assets/brand/jalui_logo_kit/png/logo-light@2x.png 2x">
        <!-- Fallback (claro) -->
        <img
          src="/assets/brand/jalui_logo_kit/png/logo-light@1x.png"
          alt="Discobar JaluiJopi"
          width="220"
          decoding="async"
          fetchpriority="high"
          class="logo">
      </picture>
    </a>

    <nav class="main-nav" aria-label="Primary">
      <a href="{{ homeHref }}" class="{{ 'is-active' if isHome else '' }}">{{ T['Inicio'] }}</a>
      <a href="{{ menuHref }}" class="{{ 'is-active' if isMenu else '' }}">{{ T['Carta'] }}</a>
      <a href="{{ contactHref }}" class="{{ 'is-active' if isContact else '' }}">{{ T['Contacto'] }}</a>
      <a href="{{ mapHref }}" class="{{ 'is-active' if isMap else '' }}">{{ T['ComoLlegar'] }}</a>
    </nav>

    <nav class="lang-nav" aria-label="Language">
      {% if alt and alt.es %}<a href="{{ alt.es }}" hreflang="es" title="EspaÃ±ol">ğŸ‡ªğŸ‡¸</a>{% else %}<a href="/es/" hreflang="es" title="EspaÃ±ol">ğŸ‡ªğŸ‡¸</a>{% endif %}
      {% if alt and alt.en %}<a href="{{ alt.en }}" hreflang="en" title="English">ğŸ‡¬ğŸ‡§</a>{% else %}<a href="/en/" hreflang="en" title="English">ğŸ‡¬ğŸ‡§</a>{% endif %}
      {% if alt and alt.fr %}<a href="{{ alt.fr }}" hreflang="fr" title="FranÃ§ais">ğŸ‡«ğŸ‡·</a>{% else %}<a href="/fr/" hreflang="fr" title="FranÃ§ais">ğŸ‡«ğŸ‡·</a>{% endif %}
    </nav>
  </div>
</header>
